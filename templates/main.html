{% extends 'base.html' %}
{% load i18n %}
{% block full_title %}Prestashop Sync Service{% endblock %}

{% block content %}
    <!--{% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li>
                    <span{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</span>
                    <a href="#" title="{% trans "Close" %}">
                        <span class="dismiss-message"></span>
                    </a>
                </li>
            {% endfor %}
        </ul>
    {% endif %}-->

    {% include "partial/shops_formset.html" %}
    {% if not auth %}
    <div id="advantages_wrapper">
        <div id="advantages">
            <div class="adv_text">
                <img width="53" height="54" src="{{ STATIC_URL }}images/transparent.png">
                <span class="title">{% trans "Save your time and nerves" %}</span>
                <p>
                    {% blocktrans %}
                    Our service allows to load all products from your shop and <strong>manage
                    them</strong> from a one single list.<br>
                    You can also perform <strong>bulk quantity updates</strong> from a CSV file
                        generated by a custom CRM system.
                    {% endblocktrans %}
                </p>
            </div>
            <div class="adv_text">
                <img class="adv_1" width="53" height="54" src="{{ STATIC_URL }}images/transparent.png">
                <span class="title">{% trans "Organize your shops" %}</span>
                <p>
                    {% blocktrans %}
                    Need more than a one shop? Our service allows you to <strong>organize
                    and manage</strong> them simultaneously.<br>
                    You can even configure <strong>scheduled updates</strong> for all your
                        products. Just follow <a href="#">these instuctions</a> in the manual.
                    {% endblocktrans %}
                </p>
            </div>
            <div class="adv_text">
                <img class="adv_2" width="53" height="54" src="{{ STATIC_URL }}images/transparent.png">
                <span class="title">{% trans "Request new features" %}</span>
                <p>
                    {% blocktrans %}
                    We can't forsee every single piece of a useful functionality for you.
                        So don't hesitate to <strong><a href="#" class="feedback">write us a message</a></strong>
                        if you found something that is worth implementation.
                    {% endblocktrans %}
                </p>
            </div>
        </div>
    </div>
    <div class="dashed-border"></div>
    {% endif %}

    <div class="main-form-container">
        <div class="form-header">{% trans "Load/Update data panel" %}</div>
        <div class="main-form-wrapper">
            <div class="info-left one">
                <div class="info-content">
                    {% blocktrans %}
                        Configure your shop for use with <strong>Prestashop Sync service</strong>.
                        We created a <strong>module</strong> for this.<br><br>
                        For setup instructions, please follow the <a href="{{ manual_url }}">setup manual</a>.
                    {% endblocktrans %}
                </div>
                <div class="corner"></div>
            </div>
            <div id="load_data_form_wrapper" class="left">
                {% include "partial/load_form.html" %}
            </div>
            <span class="clear"></span>
        </div>
    </div>
    <div class="dashed-border"></div>
    <div class="main-form-container">
        <div class="form-header header2">{% trans "Shop List" %}</div>
        <div class="main-form-wrapper shops">
            <div class="info-left two">
                <div class="info-content">
                    {% blocktrans %}
                        Add all your shops to the <strong>Shop List</strong>.
                        Then you can easily load and manage products in the shops within just a
                        few clicks.<br><br>
                        Click on a shop title to load products for it.
                    {% endblocktrans %}
                </div>
                <div class="corner"></div>
            </div>
            {% include "partial/manage_shops.html" %}
            <span class="clear"></span>
        </div>
    </div>
    <div class="dashed-border"></div>
    <div class="main-form-container">
        <div class="update-button-wrapper">
            <div class="update-panel">
            <span class="btn btn-primary disabled update">
                <span class="update-text">{% trans "Update" %}</span>
                <span class="update-info"></span>
            </span>
            </div>
        </div>
        <div class="form-header header3">{% trans "Shop Data" %}</div>
        <div class="main-form-wrapper products">
            <div id="products_table">
            </div>
        </div>
    </div>

    {# ---------------Extra dialogs------------------------- #}
    <div id="save_shop_question">
        {% trans "Do you wish to save" %} <span></span> {% trans "to your shops?" %}
        <button class="link-button" data-href="{% url temp_shop_save %}">{% trans "Yes" %}</button>
        <button class="link-button" >{% trans "No" %}</button>
    </div>
    <div class="hidden">
        <span id="updated_text">{% trans "Data is being updated in the background. It may take a while depending on the CSV file size." %}</span>
        <span id="13_api_update_text">{% trans "Please update your api.php file" %}</span>
        <span id="14_update_permission">{% trans "Your hosting provider blocks HTTP PUT requests or update is not allowed in Prestashop Web-Service permissions" %}</span>
        <span id="14_update_permission_or_csv">
            {% trans "No products were created. Please check your web-service permissions and CSV file for errors." %}
        </span>
        <span id="14_create_products">
            {% trans "Products were added. You may have to wait for images to be uploaded." %}
        </span>
        <span id="15_depends_on_stock">
            {% blocktrans %}
            Some of the products were not updated, because <strong>advanced stock management</strong> option is not supported
            {% endblocktrans %}
        </span>
        <span id="html5_upload_file">{% trans "Drag file here to upload and validate." %}</span>
        <span id="html5_too_big_file">{% trans "Sorry, the file is too big." %}</span>
        <span id="please_register">{% trans "Please register to add shops" %}</span>
        <span id="please_upgrade">{% trans "Please upgrade to a different plan to continue" %}</span>
    </div>
    {#  START Delete shop dialog #}
    <div id="delete_shop_dialog" class="hidden">
        <div id="delete_shop_message">{% trans "Delete shop" %} <a></a>?</div>
        <a href="PLACEHOLDER" id="delete_shop" class="link-button small">{% trans "Ok" %}</a>
        <span class="facebox-close link-button small">{% trans "Cancel" %}</span>
    </div>
    {# END Delete shop dialog #}

    {#  START Add shop dialog #}
    <div id="add_shop_form_dialog" class="hidden">
        <form method="post" action="{% url add_shop %}" class="standard-form shop-form">
            {% csrf_token %}
            <h2 class="maroon-small-heading">{% trans "Add Shop" %} {{ shop.title }}</h2><br>
            <ul>
                {{ add_form.as_ul }}
                <li><input type="submit" class="link-button" value="{% trans "Add" %}"></li>
            </ul>
        </form>
    </div>
    {# END Add shop dialog #}
{% endblock %}
